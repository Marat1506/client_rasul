# Настройка переменных окружения для фронтенда

## Проблема
Фронтенд пытается подключиться к `http://localhost:3001`, но бэкенд находится на сервере `31.57.228.116`.

## Решение

### Шаг 1: Создать файл `.env.local`

Создайте файл `client/.env.local` со следующим содержимым:

```env
# API Configuration
# Backend server URL (через Nginx, без порта)
NEXT_PUBLIC_BASE_URL=http://31.57.228.116
NEXT_PUBLIC_SOCKET_URL=http://31.57.228.116
```

### Шаг 2: Перезапустить dev сервер

После создания файла `.env.local` нужно **перезапустить** dev сервер Next.js:

```bash
# Остановите текущий сервер (Ctrl+C)
# Затем запустите снова
npm run dev
# или
yarn dev
```

### Шаг 3: Проверить подключение

После перезапуска фронтенд должен подключаться к бэкенду на сервере.

## Альтернативные настройки

### Для локальной разработки с локальным бэкендом:

```env
NEXT_PUBLIC_BASE_URL=http://localhost:3001
NEXT_PUBLIC_SOCKET_URL=http://localhost:3001
```

### Для продакшена (Vercel):

Если бэкенд будет доступен по домену (например, `api.example.com`):

```env
NEXT_PUBLIC_BASE_URL=https://api.example.com
NEXT_PUBLIC_SOCKET_URL=https://api.example.com
```

## Проверка

1. **Проверьте, что бэкенд доступен:**
   ```bash
   curl http://31.57.228.116/api/v1/health
   ```
   Должен вернуть: `{"status":"ok","timestamp":"..."}`

2. **Проверьте в браузере:**
   - Откройте консоль разработчика (F12)
   - Проверьте, что запросы идут на `http://31.57.228.116` вместо `localhost:3001`

## Troubleshooting

### Ошибка "Network Error"

1. **Проверьте доступность бэкенда:**
   ```bash
   curl http://31.57.228.116/api/v1/health
   ```

2. **Проверьте CORS на бэкенде:**
   - Бэкенд должен разрешать запросы с вашего домена
   - Мы отключили CORS на бэкенде (разрешены все origins)

3. **Проверьте файл `.env.local`:**
   - Убедитесь, что файл находится в папке `client/`
   - Убедитесь, что переменные начинаются с `NEXT_PUBLIC_`
   - Перезапустите dev сервер после изменения

### Ошибка "CORS"

Если получаете ошибку CORS:
- Убедитесь, что бэкенд разрешает запросы с вашего домена
- Проверьте настройки CORS на бэкенде

### Socket.IO не подключается

Если WebSocket не подключается:
- Проверьте, что `NEXT_PUBLIC_SOCKET_URL` указан правильно
- Убедитесь, что Socket.IO сервер запущен на бэкенде
- Проверьте настройки CORS для Socket.IO на бэкенде

